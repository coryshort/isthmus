#!/bin/bash
OPENSIM_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )/.." && pwd )"

region_name="My Region"
read -r -p "New region name (My Region): "
if [ "${REPLY}" != "" ]; then
    region_name=${REPLY}
fi

region_coords="10000,10000"
read -r -p "New region coordinates (10000,10000): "
if [ "${REPLY}" != "" ]; then
    region_coords=${REPLY}
fi

region_port="19000"
read -r -p "New region port (19000): "
if [ "${REPLY}" != "" ]; then
    region_port=${REPLY}
fi

region_uuid=`uuidgen`

mkdir -p "${OPENSIM_DIR}/etc/regions"
regions_ini="${OPENSIM_DIR}/etc/regions/${region_name}.ini"
echo "Populating ${regions_ini}..."
echo "[${region_name}]" > "${regions_ini}"
echo "RegionUUID = ${region_uuid}" >> "${regions_ini}"
echo "Location = ${region_coords}" >> "${regions_ini}"
echo "InternalAddress = 0.0.0.0" >> "${regions_ini}"
echo "InternalPort = ${region_port}" >> "${regions_ini}"
echo "AllowAlternatePorts = False" >> "${regions_ini}"
echo "ExternalHostName = SYSTEMIP" >> "${regions_ini}"
#echo "MaxPrims = 20000"            >> "${regions_ini}"
#echo "MaxAgents = 10"              >> "${regions_ini}"
#echo "RegionType = \"Mainland\""   >> "${regions_ini}"

echo "Done"


  i s t h m u s
  Quick Setup guide                                                 18.07.23

------------------------------------------------------------------------------

  Base setup

$ git clone https://github.com/lickx/isthmus.git 
$ cd isthmus/bin
$ ./siminit

  (Follow instructions on screen)

  To install the simulator software, this can be done now:

  !! IMPORTANT
  This will only work with the lickx branch which can be found at
  https://github.com/lickx/opensim

$ ./siminstall ~/Downloads/opensim-lickx.zip

------------------------------------------------------------------------------

  Database setup

  For now it is assumed you will be making a new database for each
  installation of Isthmus. The database will be shared among all regions.
  By default each region runs in its own simulator instance, which is managed
  by GNU Screen.

  $ sudo mysql --user root --password
MariaDB [(none)]> create database isthmus_gridname;
MariaDB [(none)]> grant all on isthmus_gridname.* to isthmus_gridname@localhost identified by 'PASSWORD';

    Note: If you have multiple installations of isthmus and use Gloebit, you'll
  probably also want a seperate database for Gloebit usage to be shared by all
  isthmus installations. See the end of Gloebit.ini

  !! IMPORTANT
  The default 16M packet size is no longer enough for running OpenSim with sql.
  Edit your mariadb/mysql config to set it higher. In Ubuntu this is
  /etc/mysql/mariadb.conf.d/50-server.cnf:
  
  max_allowed_packet      = 32M

------------------------------------------------------------------------------

  Adding your first simulator

  If you chose 'localgrid' or 'localgrid-nohg' when using siminit before,
  then now it is time to start robust. Else skip to the simadd bit.
  
./robust start

  Then, create the first user; the owner of the sim we're going to add next
  
./screen -r ROBUST
  (type 'create user' and follow instructions. When done, press <CTRL-A D> to
  detach the ROBUST screen)

  Now, we're going to add the first sim. I suggest to call it 'Welcome' if it
  is your own grid because robust will use that as the default region:

./simadd
(Follow instructions on screen)

  Finally, login and see if everything runs ok.
  
------------------------------------------------------------------------------

  Command line commands

$ cd ~/isthmus/bin

  For a single simulator:

  Start:    ./simctl start SimName
  Stop:     ./simctl stop SimName
  Restart:  ./simctl restart SimName
  Status:   ./simctl status SimName

  To see more options, type without parameters:   ./simctl

  For all simulators at once which are symlinked in the sims-enabled folder:

  Start:    ./simauto start
  Stop:     ./simauto stop
  Restart:  ./simauto restart
  Reload:   ./simauto reload
  Audit:    ./simauto audit

  You'd use restart after big upgrades with drastic changes in OpenSim, such as
  database migrations. It will take all sims in the isthmus installation down,
  upgrade, then start them again. Reload is used for small upgrades, sims are
  restarted one by one. Reload can for example be used for automated weekly
  restarts.

  Audit will list all used ports, this can be piped for example:
  ./simauto audit | sort | less

  To see more options, type without parameters:   ./simauto
 
------------------------------------------------------------------------------

  Autobackup

  To setup autobackup, refer to etc/autobackup.ini

  You can store the OARs in any folder/mountpoint. For remote backups, specify
  a remote or cloud storage mountpoint such as your DropBox folder.

  However, we recommend instead of the autobackup module, to use a scheduled
  cronjob using simbackup. Refer to doc/crontab

------------------------------------------------------------------------------

  Optional modules

  To setup voice support provided by Vivox, refer to etc/voice.ini
  To setup Gloebit currency, refer to etc/Gloebit.ini
  To setup OpenMetaverse currency, refer to etc/omc.ini

------------------------------------------------------------------------------
